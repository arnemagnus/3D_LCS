% ---------------- %
% Text-related packages
% ---------------- %

% Watermark for draft purposes
%\usepackage[]{background}
%\backgroundsetup{
%    position  = current page.east,
%    angle = -90,
%    nodeanchor = east,
%    vshift = -5mm,
%    opacity = 1,
%    scale = 3,
%    contents = {3. utkast 20180608}
%}
%
\usepackage[%
%showframe,% Show margins of document. Remember to remove prior to hand-in.
]{geometry}

% Margins
%\usepackage[a4paper,margin=2.5cm]{geometry}

% Typeset UTF-8 symbols:
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}

% Text spacing
\usepackage[]{setspace}

% Manage culturally-determined typographical, and other, rules:
\usepackage[main=english,norsk]{babel}

% Choose Libertine font:
\usepackage[]{libertine}
% Choose typewriter-family font which matches Libertine better than the default:
\usepackage[scaled=0.96]{zi4}

% Include author's affiliation
\usepackage[]{authblk}

% Typeset relevant quotations or sayings as epigraphs:
\usepackage[]{epigraph}

% Simple syntax for superscript 1st, 2nd, 3rd etc: \nth{#}
\usepackage[super]{nth}

% Simple syntax for formatting numbers with many digits
\usepackage[]{numprint}
\npthousandsep{\,}

%% Paragraphs separated by blank lines rather than indentation
%\usepackage[parfill]{parskip}

% Customize title/heading styles
\usepackage[]{titlesec}

%% Control ToC, LoF, LoT etc.
%\usepackage[titles]{tocloft}

% Verbatim
\usepackage[]{verbatim}

% Frame any object in the document
\usepackage[]{framed}

% Break lines in citations which do not fit on a single line
\usepackage[]{breakcites}

% Insert placeholder text
\usepackage[]{lipsum}

% Include the possibility of colored text
\usepackage[]{color}

% Include the possibility to strikethrough text
\usepackage[normalem]{ulem}

%
% Float-related packages
%

% Interface for floating objects
\usepackage[]{float}

% Typographical refinement
\usepackage[activate={true,nocompatibility},% Let microtype do its magic
%                                           % without trying to keep page breaks
%                                           % etc.
final=true,% Activate microtype even when in draft mode
kerning=true,% Fixes kerning issues
spacing=true,% Fixes spacing issues
tracking=true,% Adds letter spacing for small caps
shrink=30,% Characters are stretched or shrunk in order to improve justification
stretch=30,% up to 3 %
factor=0% Controls how much punctuation protrudes past the end of the line
]{microtype}
\microtypecontext{spacing=nonfrench} % <-- No spacing found for Linux Libertine

% PGF stuff
\usepackage{pgfcache}

\setpgfpreamble{%
    \usepackage[]{amsmath}
    \usepackage{libertine-type1}
    \usepackage[libertine]{newtxmath}
    \usepackage[]{physics}
    \usepackage[]{bm}
    % Clever typesetting of SI units
    \usepackage[]{siunitx}
    % Macros for greek letters in roman style, in math mode
    \DeclareRobustCommand{\mathup}[1]{%
    \begingroup\ensuremath\changegreek\mathrm{#1}\endgroup}
    \DeclareRobustCommand{\mathbfup}[1]{%
    \begingroup\ensuremath\changegreek\bm{\mathrm{#1}}\endgroup}

    \makeatletter
    \def\changegreek{\@for\next:={%
            alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,%
            xi,pi,rho,sigma,tau,upsilon,phi,chi,psi,omega,varepsilon,varpi,%
        varrho,varsigma,varphi}%
    \do{\expandafter\let\csname\next\expandafter\endcsname\csname\next up\endcsname}}
    \makeatother

    % Define vectors in bold, roman, lowercase font
    \newcommand{\vct}[1]{\ensuremath{\mathbfup{\MakeLowercase{#1}}}}

    % Define unit vectors in bold, roman, lowercase font, with hats
    \newcommand{\uvct}[1]{\ensuremath{\mathbfup{\hat{\MakeLowercase{#1}}}}}

    % Define matrices in bold, roman, uppercase font
    \newcommand{\mtrx}[1]{\ensuremath{\mathbfup{\MakeUppercase{#1}}}}
}

% Include TikZ figures as standalone documents
\usepackage[]{standalone}
\standaloneconfig{mode=buildnew}


% Interface for stacked floating objects:
\usepackage[]{subcaption}

% Enhanced graphics support
\usepackage[]{graphicx}

% EPS files
\usepackage[]{epstopdf}

% SVG files
\usepackage[]{svg}

% PGF files
\usepackage[]{pgf}

% PGF plots
\usepackage[]{pgfplots}

% Wrap text around figure
\usepackage[]{wrapfig}

% Extend array and tabular environments
\usepackage[]{array}

% Define math mode version of centered type column
\newcolumntype{C}{>$c<$}

% Rotation tools for floats. Default: Clockwise rotation
\usepackage[figuresright]{rotating}

% Place float barriers between sections
\usepackage[section]{placeins}
% Ensure that float barriers are placed between subsections as well
%\makeatletter
%\AtBeginDocument{%
%  \expandafter\renewcommand\expandafter\subsection\expandafter{%
%    \expandafter\@fb@secFB\subsection
%  }%
%}
%\makeatother

% Enable \afterpage{\clearpage} command in order to combat bad page breaks
\usepackage[]{afterpage}

% Format float captions any which way you want.
% My preference:    No more than 95 % of the overall textwidth
%                   Slightly smaller fontsize than the text otherwise
%                   Label typeset in bold
%                   Separate label from caption with colon
\usepackage[%format={\fontsize{11}{13}\selectfont},%
font={small},%
width=0.9\textwidth,%
labelfont=bf,%
labelsep=colon%
]{caption}

% Include entire (external) PDF pages in document
\usepackage[]{pdfpages}

% Better formatting for tables
\usepackage[]{booktabs}

% Multiple rows in tables
\usepackage[]{makecell}

%
% Mathematical functions
%

% Necessary for most kinds of mathematical typesetting:
\usepackage[]{amsmath,amssymb}

% Nice typesetting of fractions (math and text mode)
\usepackage[]{xfrac}

% Package containing useful macros for typsetting vector calculus, linear
% algebra etc.
\usepackage{mathtools}
\usepackage{xparse}
\usepackage[]{physics}

% Typeset mathematical symbols in bold, useful when working with vectors,
% tensors, etc.
\usepackage[]{bm}

% Necessary to write greek letters in upright in math mode, e.g. for vectors
\usepackage[libertine]{newtxmath}

% Clever typesetting of SI units
\usepackage[]{siunitx}

%
% Reference-related packages
%

% Use biblatex for handling refernces
\usepackage[backend=biber,%
style=authoryear,%
language=british,%
dashed=false,%
url=false,%
doi=true,%
eprint=false,%
giveninits=true,%
uniquename=init%
]{biblatex}

\defbibheading{bibliography}[\bibname]{\chapter*{#1}\markboth{#1}{#1}}
\AtBeginDocument{\renewcommand{\bibname}{References}}
% Refer to all authors by their last name first
\DeclareNameAlias{author}{last-first}

% Ensure that quoted texts are typeset according to rules of main language
\usepackage[]{csquotes}

% Access a myriad of different coloring options for e.g. hyperref links
\usepackage[]{xcolor}

% Make all referrals hyperlinks (within the document)
\usepackage[]{hyperref}
\hypersetup{%
%hidelinks=true,%
colorlinks,%
linkcolor={red!50!black},%
citecolor={blue!50!black},%
urlcolor={blue!80!black},%
pdfauthor={Arne Magnus Tveita LÃ¸ken},%
pdftitle={Computing Hyperbolic Lagrangian Coherent Structures in
Three-Dimensional Flow Systems},%
pdfsubject={Computational physics},%
pdfkeywords={Computational physics, Nonlinear dynamics, Lagrangian analysis,
    Lagrangian coherent structures, Numerical integration, Spline
    interpolation, Stretch and strain
in material flows}%
}

% Hide hyperlinks upon printing, i.e., they are printed in the regular
% text color (typically key)
\usepackage[ocgcolorlinks]{ocgx2}

% Bookmark organization for the hyperref package
\usepackage[]{bookmark}

% Clever referrals to objects (figures, tables, etc.)
\usepackage[]{cleveref}

% Use endash in a cleveref-range
\newcommand{\crefrangeconjunction}{--}

% Clever typesetting of theorems, definitions etc.
\let\openbox\relax
\usepackage[]{amsthm}
\newtheoremstyle{mydefinition}{\topsep}{\topsep}{\selectfont}{}{}{.}{\newline}{{\bfseries{\thmname{#1}\thmnumber{~#2}}}\emph{\thmnote{ (#3)}}}
\theoremstyle{mydefinition}
\newtheorem{thm}{Theorem}
\let\oldthm=\thm
\let\endoldthm=\endthm
\renewenvironment{thm}{\begin{oldthm}}{\end{oldthm}\vspace{-0.7\baselineskip}}
\crefname{thm}{theorem}{theorems}
\newtheorem{defn}{Definition}
\let\olddefn=\defn
\let\endolddefn=\enddefn
\renewenvironment{defn}{\begin{olddefn}}{\end{olddefn}\vspace{-0.7\baselineskip}}
\crefname{defn}{definition}{definitions}
\newtheorem{rmrk}{Remark}
\let\oldrmrk=\rmrk
\let\endoldrmrk=\endrmrk
\renewenvironment{rmrk}{\begin{oldrmrk}}{\end{oldrmrk}\vspace{-0.7\baselineskip}}
\crefname{rmrk}{remark}{remarks}
\theoremstyle{plain}
\newtheorem{lemm}{Lemma}
\crefname{lemm}{lemma}{lemmas}

\crefname{figure}{figure}{figures}
\crefname{equation}{equation}{equations}

\usepackage[en-US]{datetime2}


